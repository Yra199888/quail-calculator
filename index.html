<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Quail Farm Tools PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ========= –ì–õ–û–ë–ê–õ–¨–ù–Ü –¢–ï–ú–ò ========= */
:root {
    --bg: #111;
    --text: #fff;
    --card: #1b1b1b;
    --border: #333;
    --accent: #4caf50;
}
.light {
    --bg: #f3f3f3;
    --text: #111;
    --card: #fff;
    --border: #ccc;
    --accent: #2a7cda;
}

body {
    background: var(--bg);
    color: var(--text);
    margin: 0;
    padding: 0;
    font-family: Arial;
    transition: .3s;
}

/* ========= –í–ï–†–•–ù–Ø –ù–ê–í–Ü–ì–ê–¶–Ü–Ø ========= */
.topnav {
    display: flex;
    justify-content: space-around;
    align-items: center;
    background: var(--card);
    border-bottom: 2px solid var(--border);
    padding-top: 10px;
}

.tab-btn {
    flex: 1;
    text-align: center;
    padding: 12px 0;
    font-size: 18px;
    cursor: pointer;
    color: var(--text);
    border-bottom: 4px solid transparent;
}

.tab-btn.active {
    font-weight: bold;
    color: var(--accent);
    border-bottom: 4px solid var(--accent);
}

/* ========= –ö–û–ù–¢–ï–ô–ù–ï–†–ò ========= */
.page {
    display: none;
    padding: 20px;
    padding-bottom: 50px;
}
.active-page {
    display: block;
}

.container {
    background: var(--card);
    padding: 20px;
    border-radius: 10px;
    border: 1px solid var(--border);
    max-width: 900px;
    margin: auto;
    margin-top: 20px;
}

/* ========= –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ========= */
table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}
td, th {
    border: 1px solid var(--border);
    padding: 8px;
    text-align: center;
}
th {
    background: var(--accent);
    color: #fff;
}
input {
    width: 90px;
    padding: 5px;
    border-radius: 5px;
    background: #0003;
    border: 1px solid var(--border);
    color: var(--text);
}

.result {
    font-size: 20px;
    margin-top: 15px;
    line-height: 30px;
}

/* ========= –°–ü–û–í–Ü–©–ï–ù–ù–Ø ========= */
#saveAlert {
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--accent);
    color: #fff;
    padding: 10px 20px;
    border-radius: 6px;
    opacity: 0;
    pointer-events: none;
    transition: 0.4s;
    z-index: 9999;
}
#saveAlert.show {
    opacity: 1;
    transform: translateY(5px);
}

/* ========= –ü–Ü–î–°–í–Ü–¢–ö–ê ========= */
.row-highlight {
    background: #2ecc71 !important;
    transition: background 0.6s ease;
}

/* ========= –û–±–ª—ñ–∫ —è—î—Ü—å ========= */
.stat {
    font-size: 20px;
    line-height: 32px;
}
</style>
</head>
<body>

<div id="saveAlert">–ó–±–µ—Ä–µ–∂–µ–Ω–æ ‚úîÔ∏è</div>

<!-- –ó–í–£–ö -->
<audio id="blipSound">
    <source src="data:audio/wav;base64,UklGRuQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YcQAAACQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQ==" type="audio/wav">
</audio>

<!-- ========= –í–ï–†–•–ù–Ñ –ú–ï–ù–Æ ========= -->
<div class="topnav">
    <div class="tab-btn active" onclick="openTab('calculator', this)">üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</div>
    <div class="tab-btn" onclick="openTab('eggs', this)">ü•ö –û–±–ª—ñ–∫ —è—î—Ü—å</div>
</div>

<!-- ========= –í–∫–ª–∞–¥–∫–∞: –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ========= -->
<div class="page active-page" id="page-calculator">
    <h2 style="text-align:center;">üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–æ—Ä–º—É</h2>

    <div class="container">
        <table>
            <tr>
                <th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th>
                <th>–ö-—Å—Ç—å (–∫–≥)</th>
                <th>–¶—ñ–Ω–∞ –∑–∞ –∫–≥</th>
                <th>–í–∞—Ä—Ç—ñ—Å—Ç—å</th>
            </tr>
        </table>

        <table id="tbl"></table>

        <h3>–ü–æ—Ç—Ä—ñ–±–Ω–∏–π –æ–± º—î–º –∫–æ—Ä–º—É (–∫–≥):</h3>
        <input id="volume" type="number" value="25">

        <div class="result">
            –ó–∞–≥–∞–ª—å–Ω–∞ —Ü—ñ–Ω–∞: <b id="total">0</b> –≥—Ä–Ω<br>
            –¶—ñ–Ω–∞ –∑–∞ 1 –∫–≥: <b id="perkg">0</b> –≥—Ä–Ω<br>
            –í–∞—Ä—Ç—ñ—Å—Ç—å –æ–± º—î–º—É: <b id="totalVolume">0</b> –≥—Ä–Ω
        </div>
    </div>
</div>

<!-- ========= –í–∫–ª–∞–¥–∫–∞: –û–ë–õ–Ü–ö –Ø–Ñ–¶–¨ ========= -->
<div class="page" id="page-eggs">
    <h2 style="text-align:center;">ü•ö –û–±–ª—ñ–∫ —è—î—Ü—å</h2>

    <div class="container">

        <label>–Ø–π—Ü—è –∑–∞ –¥–æ–±—É:</label><br>
        <input id="eggsGood" type="number" value="0"><br><br>

        <label>–ë—Ä–∞–∫–æ–≤–∞–Ω—ñ:</label><br>
        <input id="eggsBad" type="number" value="0"><br><br>

        <label>–î–ª—è –¥–æ–º—É:</label><br>
        <input id="eggsHome" type="number" value="0"><br><br>

        <button onclick="saveEggs()" style="padding:10px 20px; background:var(--accent); color:#fff; border:none; border-radius:5px;">
            –ó–±–µ—Ä–µ–≥—Ç–∏
        </button>

        <div class="stat">
            <p>ü•ö –ö–æ–º–µ—Ä—Ü—ñ–π–Ω—ñ: <b id="eggsSell">0</b></p>
            <p>üì¶ –õ–æ—Ç–∫—ñ–≤ —Å—å–æ–≥–æ–¥–Ω—ñ: <b id="traysToday">0</b></p>
            <p>‚ûï –î–æ –ø–æ–≤–Ω–æ–≥–æ –ª–æ—Ç–∫–∞: <b id="trayRemainder">0</b></p>

            <hr>

            <p>üìÖ –ó–∞ —Ç–∏–∂–¥–µ–Ω—å: <b id="weekEggs">0</b></p>
            <p>üìÜ –ó–∞ –º—ñ—Å—è—Ü—å: <b id="monthEggs">0</b></p>
            <p>üî¢ –í—Å—å–æ–≥–æ: <b id="totalEggs">0</b></p>
            <p>üì¶ –í—Å—å–æ–≥–æ –ª–æ—Ç–∫—ñ–≤: <b id="totalTrays">0</b></p>
        </div>
    </div>
</div>

<script>
/* ========= –ü–ï–†–ï–ú–ò–ö–ê–ù–ù–Ø –í–ö–õ–ê–î–û–ö ========= */
function openTab(tab, btn) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active-page"));
    document.querySelector("#page-" + tab).classList.add("active-page");

    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
}

/* ========= –°–ü–û–í–Ü–©–ï–ù–ù–Ø ========= */
function showSaveAlert() {
    const box = document.getElementById("saveAlert");
    box.classList.add("show");
    setTimeout(() => box.classList.remove("show"), 1200);
}

function playBlip() {
    const s = document.getElementById("blipSound");
    s.currentTime = 0;
    s.volume = 0.25;
    s.play();
}

function highlightRow(i) {
    const row = document.getElementById("row" + i);
    row.classList.add("row-highlight");
    setTimeout(() => row.classList.remove("row-highlight"), 150);
}

/* ========= –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ========= */
const components = [
    ["–ö—É–∫—É—Ä—É–¥–∑–∞", 10],
    ["–ü—à–µ–Ω–∏—Ü—è", 5],
    ["–Ø—á–º—ñ–Ω—å", 1.5],
    ["–°–æ—î–≤–∞ –º–∞–∫—É—Ö–∞", 3],
    ["–°–æ–Ω—è—à–Ω–∏–∫–æ–≤–∞ –º–∞–∫—É—Ö–∞", 2.5],
    ["–†–∏–±–Ω–µ –±–æ—Ä–æ—à–Ω–æ", 1],
    ["–ö–æ—Ä–º–æ–≤—ñ –¥—Ä—ñ–∂–¥–∂—ñ", 0.7],
    ["–¢—Ä–∏–∫–∞–ª—å—Ü—ñ–π—Ñ–æ—Å—Ñ–∞—Ç", 0.5],
    ["Dolfos D", 0.7],
    ["–°—ñ–ª—å", 0.05]
];

function loadTable(){
    let html = "";
    components.forEach((c,i)=>{
        let qty = c[1];
        let price = localStorage.getItem("p"+(i+1)) || 0;

        html += `
        <tr id="row${i+1}">
            <td>${c[0]}</td>
            <td><input id="q${i+1}" value="${qty}" step="0.1"></td>
            <td><input id="p${i+1}" value="${price}" step="0.1"></td>
            <td id="s${i+1}">0</td>
        </tr>`;
    });
    document.getElementById("tbl").innerHTML = html;
}
loadTable();

function calc() {
    let total = 0;
    let totalKg = 0;

    for (let i = 1; i <= components.length; i++) {

        let q = parseFloat(document.getElementById("q"+i).value) || 0;
        let p = parseFloat(document.getElementById("p"+i).value) || 0;
        let sum = q * p;

        localStorage.setItem("p"+i, p);

        highlightRow(i);
        playBlip();
        showSaveAlert();

        document.getElementById("s"+i).innerText = sum.toFixed(2);

        total += sum;
        totalKg += q;
    }

    let perkg = totalKg ? total / totalKg : 0;
    let vol = parseFloat(document.getElementById("volume").value) || 0;
    let totalVol = perkg * vol;

    document.getElementById("total").innerText = total.toFixed(2);
    document.getElementById("perkg").innerText = perkg.toFixed(2);
    document.getElementById("totalVolume").innerText = totalVol.toFixed(2);
}

document.addEventListener("input", calc);
calc();

/* ========= –û–ë–õ–Ü–ö –Ø–Ñ–¶–¨ ========= */
function saveEggs() {
    const good = +document.getElementById("eggsGood").value || 0;
    const bad  = +document.getElementById("eggsBad").value || 0;
    const home = +document.getElementById("eggsHome").value || 0;
    const sell = Math.max(good - bad - home, 0);

    const today = new Date().toISOString().split("T")[0];
    let eggsData = JSON.parse(localStorage.getItem("eggsLog")) || {};

    eggsData[today] = { good, bad, home, sell };

    localStorage.setItem("eggsLog", JSON.stringify(eggsData));

    playBlip();
    showSaveAlert();
    updateEggsStats();
}

function updateEggsStats() {
    let eggsData = JSON.parse(localStorage.getItem("eggsLog")) || {};
    const today = new Date().toISOString().split("T")[0];

    let d = eggsData[today] || {sell:0};
    document.getElementById("eggsSell").innerText = d.sell;

    document.getElementById("traysToday").innerText = (d.sell / 20).toFixed(2);
    document.getElementById("trayRemainder").innerText = d.sell % 20;

    let week = 0, month = 0, total = 0;
    const now = new Date();

    for (let date in eggsData) {
        let diff = (now - new Date(date)) / 86400000;
        let s = eggsData[date].sell;

        if (diff <= 7) week += s;
        if (diff <= 30) month += s;

        total += s;
    }

    document.getElementById("weekEggs").innerText = week;
    document.getElementById("monthEggs").innerText = month;
    document.getElementById("totalEggs").innerText = total;
    document.getElementById("totalTrays").innerText = (total / 20).toFixed(1);
}

updateEggsStats();
</script>

</body>
</html>