<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quail Calculator — Material 3</title>
    <link rel="stylesheet" href="material.css">
    <style>

/* ======== GLOBAL ======== */
body {
    margin: 0;
    padding: 0;
    font-family: "Roboto", sans-serif;
    background: #DEE7CD; /* Основний фон */
    color: #0D2601;      /* Темний текст */
}

/* ======== TOP TAB BAR ======== */
.tabbar {
    display: flex;
    gap: 6px;
    padding: 12px;
    background: #DEE7CD;
    position: sticky;
    top: 0;
    z-index: 100;
}

.tabbar button {
    flex: 1;
    padding: 12px 6px;
    font-size: 18px;
    border: none;
    border-radius: 16px;
    background: #D4F2A1; /* Світло-зелена м’яка кнопка */
    color: #0D2601;
    font-weight: 600;
    transition: 0.2s;
}

.tabbar button:hover {
    background: #c4e68d;
}

.tabbar button.active {
    background: #3F622D; /* Темно-зелений */
    color: white;
}


/* ======== MATERIAL 3 TONAL CARD ======== */
.m3-card {
    background: #D4F2A1; /* Світло-зелений блок */
    padding: 18px;
    margin: 14px;
    border-radius: 20px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.08);
}

/* ======== TABLE STYLE ======== */
.m3-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 12px;
}

.m3-table th {
    background: #3F622D;  /* Темно-зелений */
    color: white;
    text-align: left;
    padding: 10px;
    font-size: 15px;
}

.m3-table td {
    padding: 10px;
    border-bottom: 1px solid #0D2601; /* Темно-зелена тонка лінія */
    background: #FFFFFF;
}

.m3-table tr:nth-child(even) td {
    background: #F2FBE6; /* Дуже м'який зелений для чергування рядків */
}

/* ======== HEADERS ======== */
h2, h3 {
    color: #0D2601;
}

/* ======== BUTTON FIX — ПОВНЕ ПЕРЕЗАПИСАННЯ СТИЛЕЙ ======== */

button, .btn {
    background: #3F622D !important; /* Темно-зелений */
    color: white !important;
    border: none !important;
    border-radius: 14px !important;
    padding: 12px 20px !important;
    font-weight: 600 !important;
    font-size: 16px !important;
    cursor: pointer;
}

button:hover, .btn:hover {
    background: #2F4D21 !important; /* Темніший зелений */
}


/* ====== INPUTS ====== */

input, select, textarea {
    padding: 10px;
    width: auto;
    border-radius: 10px;
    border: 2px solid #3F622D;
    background: #FFFFFF;
    color: #0D2601;
    font-size: 15px;
}

input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #0D2601;
}

        /* Кожна вкладка = окрема сторінка */
.section-page {
    display: none;
}
.section-page.active {
    display: block;
}

        


</style>
</head>

<body>
<div class="m3-tabs">
  <div class="m3-tab active" onclick="showPage('feed')">Корм</div>
  <div class="m3-tab" onclick="showPage('eggs')">Яйця</div>
  <div class="m3-tab" onclick="showPage('orders')">Замовлення</div>
  <div class="m3-tab" onclick="showPage('clients')">Клієнти</div>
  <div class="m3-tab" onclick="showPage('finance')">Фінанси</div>
  <div class="m3-tab" onclick="showPage('incub')">Інкубація</div>
</div>


    <!-- =============== PAGE CONTAINERS =============== -->

<div id="feed" class="section-page" style="display:block;">

  <!-- === СЕКЦІЯ 1 — Комбікорм (Старий рецепт) === -->
  <div class="m3-card">
      <h2>1. Комбікорм</h2>

      <div class="m3-input">
          <label>Бажана вага партії (кг)</label>
          <input type="number" id="targetKg" value="25" onchange="recalcFeed()">
      </div>

      <div style="margin-bottom: 12px;">
          <button class="m3-btn" onclick="applyRecipePreset('starter')">Стартер</button>
          <button class="m3-btn" onclick="applyRecipePreset('grower')">Гровер</button>
          <button class="m3-btn" onclick="applyRecipePreset('layer')">Несучки</button>
      </div>

      <table class="m3-table" id="feedTable">
          <thead>
              <tr>
                  <th>Компонент</th>
                  <th>К-сть (кг)</th>
                  <th>Ціна</th>
                  <th>Сума</th>
              </tr>
          </thead>
          <tbody id="feedRows"></tbody>
      </table>

      <p><b>Загальна вага:</b> <span id="feedTotalKg">0</span> кг</p>
      <p><b>Загальна вартість:</b> <span id="feedTotalCost">0</span> грн</p>
  </div>



  <!-- === СЕКЦІЯ 3.1 — Рецепт комбікорму === -->
  <div class="m3-card">
      <h2 class="m3-title">3.1. Рецепт комбікорму</h2>

      <p>Вага партії (кг):
         <input type="number" id="feedBatchKg" value="25" step="1" style="width:90px;" oninput="recalcFeed()">
      </p>

      <table class="m3-table">
          <thead>
              <tr>
                  <th>Компонент</th>
                  <th>%</th>
                  <th>Кількість (кг)</th>
              </tr>
          </thead>
          <tbody id="feedTableRows"></tbody>
      </table>
  </div>



  <!-- === СЕКЦІЯ 3.2 — Добова норма комбікорму === -->
  <div class="m3-card">
      <h2 class="m3-title">3.2. Добова норма</h2>

      <p>
          Добова норма на 1 самку (г):
          <input type="number" id="feedDailyPerHen" value="30" style="width:90px;" oninput="recalcFeed()">
      </p>

      <p>
          Кількість птахів: <span id="feedBirdCount">0</span>
      </p>

      <table class="m3-table">
          <tr>
              <td>Добова потреба (кг)</td>
              <td><span id="dailyFeedNeed">0.00</span></td>
          </tr>
          <tr>
              <td>Вартість доби (грн)</td>
              <td><span id="dailyFeedCost">0.00</span></td>
          </tr>
      </table>
  </div>



  <!-- === СЕКЦІЯ 3.3 — Запаси компонентів === -->
  <div class="m3-card">
      <h2 class="m3-title">3.3. Запаси компонентів</h2>

      <table class="m3-table">
          <thead>
              <tr>
                  <th>Компонент</th>
                  <th>Є (кг)</th>
                  <th>Потрібно</th>
                  <th>Докупити</th>
              </tr>
          </thead>
          <tbody id="stockRows"></tbody>
      </table>
  </div>



  <!-- === СЕКЦІЯ 3.4 — Склад готового комбікорму === -->
  <div class="m3-card">
      <h2 class="m3-title">3.4. Склад готового комбікорму</h2>

      <p>Готовий комбікорм: <span id="feedReadyStock">0.0</span> кг</p>

      <p>Вага однієї партії:
         <input type="number" id="feedBatchSize" value="25" style="width:90px;">
      </p>

      <button class="btn" id="produceFeedBatch">Виготовити партію</button>
      <button class="btn" id="consumeDailyFeed">Списати добову норму</button>

      <table class="m3-table">
          <tr>
              <td>Залишок (кг)</td>
              <td><span id="feedStockRemain">0.0</span></td>
          </tr>
          <tr>
              <td>Хватить на днів</td>
              <td><span id="feedDaysLeft">0</span></td>
          </tr>
      </table>
  </div>

</div>


<div id="eggs" class="section-page" style="display:none;">
  <!-- 2. Облік яєць -->
<div class="m3-card" id="sec-eggs">

  <h2 class="m3-title">2. Облік яєць</h2>

  <p>Кількість зібраних яєць за добу:
    <input type="number" id="eggsTotal" value="0" step="1" style="width:80px;"
           oninput="recalcEggsBalance(); recalcProductivity();">
  </p>

  <p>Браковані яйця:
    <input type="number" id="eggsBad" value="0" step="1" style="width:80px;"
           oninput="recalcEggsBalance(); recalcProductivity();">
  </p>

  <p>Для власного використання:
    <input type="number" id="eggsOwn" value="0" step="1" style="width:80px;"
           oninput="recalcEggsBalance(); recalcProductivity();">
  </p>

  <p>Яйця, що залишилися з попередніх днів (складський залишок):
    <input type="number" id="eggsCarry" value="0" step="1" style="width:80px;"
           oninput="recalcEggsBalance();">
    <span class="small">Якщо щось збилося — виправ вручну.</span>
  </p>

  <div class="table-wrapper">
    <table class="m3-table">
      <tr>
        <td>Яєць доступно для продажу сьогодні</td>
        <td class="right"><span id="eggsForSale">0</span></td>
      </tr>
      <tr>
        <td>Всього для продажу (з урахуванням залишку)</td>
        <td class="right"><span id="eggsForSaleTotal">0</span></td>
      </tr>
      <tr>
        <td>Кількість повних лотків (по 20 шт)</td>
        <td class="right"><span id="traysCount">0</span></td>
      </tr>
      <tr>
        <td>Залишок яєць після лотків</td>
        <td class="right"><span id="eggsRemainder">0</span></td>
      </tr>
      <tr>
        <td>Ціна за 1 лоток, грн</td>
        <td><input type="number" id="trayPrice" value="0" step="1" style="width:80px;"
                   oninput="recalcEggsBalance();"></td>
      </tr>
      <tr>
        <td>Сума виручки, грн</td>
        <td class="right"><span id="income">0.00</span></td>
      </tr>
    </table>
  </div>

  <h3>2.2. Самки та продуктивність</h3>

  <p>Кількість самок у 1-й партії (7 серпня):
    <input type="number" id="hens1" value="0" step="1" style="width:80px;"
           oninput="recalcProductivity();">
  </p>

  <p>Кількість самок у 2-й партії (19 жовтня):
    <input type="number" id="hens2" value="0" step="1" style="width:80px;"
           oninput="recalcProductivity();">
  </p>

  <div class="table-wrapper">
    <table class="m3-table">
      <tr>
        <td>Самок всього</td>
        <td class="right"><span id="hensTotal">0</span></td>
      </tr>
      <tr>
        <td>Фактична продуктивність сьогодні, %</td>
        <td class="right"><span id="productivityToday">0.0</span></td>
      </tr>
    </table>
  </div>

</div>

<!-- 2.3. Підсумок по лотках -->
<div class="m3-card" id="sec-lotki">

  <h3 class="m3-title">2.3. Підсумок по лотках</h3>

  <div class="table-wrapper">
    <table class="m3-table">
      <tr>
        <td>Усього повних лотків (сьогодні)</td>
        <td class="right"><span id="totalTraysTodayLabel">0</span></td>
      </tr>
      <tr>
        <td>Заброньовано лотків (замовлення)</td>
        <td class="right"><span id="reservedTrays">0</span></td>
      </tr>
      <tr>
        <td>Вільні лотки (можна продати)</td>
        <td class="right"><span id="freeTrays">0</span></td>
      </tr>
    </table>
  </div>

</div>
    
</div>

<div id="orders" class="section-page" style="display:none;">
  <!-- Секція 5 (замовлення) -->
<div class="m3-card">

    <h2>5. Замовлення</h2>

    <div class="m3-input">
        <label>Клієнт</label>
        <input type="text" id="ordName">
    </div>

    <div class="m3-input">
        <label>Яєць</label>
        <input type="number" id="ordEggs">
    </div>

    <div class="m3-input">
        <label>Лотків</label>
        <input type="number" id="ordTrays">
    </div>

    <div class="m3-input">
        <label>Дата</label>
        <input type="date" id="ordDate">
    </div>

    <div class="m3-input">
        <label>Примітка</label>
        <input type="text" id="ordNote">
    </div>

    <button class="m3-btn" onclick="addOrder()">Додати</button>

    <h3>Активні замовлення</h3>
    <table class="m3-table">
        <tbody id="ordersActive"></tbody>
    </table>

    <h3>Виконані</h3>
    <table class="m3-table">
        <tbody id="ordersDone"></tbody>
    </table>

</div>
</div>

<div id="clients" class="section-page" style="display:none;">
  <!-- Секція 12 (клієнти) -->
    <!-- 12. Клієнти (зведена інформація) -->
<div class="m3-card">
  <h2 class="m3-title">12. Клієнти</h2>

  <p class="small">
    Зведення по виконаних замовленнях: скільки лотків та яєць купив кожен клієнт 
    і на яку суму.
  </p>

  <div class="table-wrapper">
    <table class="m3-table">
      <thead>
        <tr>
          <th>Клієнт</th>
          <th>К-сть замовлень</th>
          <th>Лотків (20 яєць)</th>
          <th>Яєць</th>
          <th>Сума, грн</th>
          <th>Останнє замовлення</th>
        </tr>
      </thead>
      <tbody id="clientsBody"></tbody>
    </table>
  </div>
</div>

</div>

<div id="finance" class="section-page" style="display:none;">

 <!-- 9. ФІНАНСОВА АНАЛІТИКА -->
<div class="m3-card" id="sec-finance">

  <!-- 9.1. Підсумок дня -->
  <h2 class="m3-title">9.1. Підсумок дня (корм + яйця)</h2>
  <div class="table-wrapper">
    <table class="m3-table">
      <tr>
        <td>Добова вартість корму (все стадо), грн</td>
        <td class="right"><span id="summaryFeedCost">0.00</span></td>
      </tr>
      <tr>
        <td>Добова виручка від яєць, грн</td>
        <td class="right"><span id="summaryEggIncome">0.00</span></td>
      </tr>
      <tr>
        <td>Орієнтовний результат за день (прибуток/збиток), грн</td>
        <td class="right"><span id="summaryProfit">0.00</span></td>
      </tr>
    </table>
  </div>

  <!-- 9.2. Фінансовий звіт за період -->
  <h2 class="m3-title" id="financeSection">9.2. Фінансовий звіт за період</h2>

  <p>
    Період:
    <select id="reportPeriod" onchange="recalcReport()">
      <option value="7">Останні 7 днів</option>
      <option value="30" selected>Останні 30 днів</option>
      <option value="all">За весь час</option>
    </select>
  </p>

  <p>
    Інші постійні витрати (на місяць), грн:
    <input type="number" id="otherCostsMonthly" value="0" step="1" style="width:100px;"
           oninput="recalcReport()">
    <span class="small">Електрика, підстилка, амортизація тощо</span>
  </p>
  
  <div class="table-wrapper">
    <table class="m3-table">
      <tr>
        <td>Днів у звіті</td>
        <td class="right"><span id="repDays">0</span></td>
      </tr>
      <tr>
        <td>Зібрано яєць, шт</td>
        <td class="right"><span id="repEggs">0</span></td>
      </tr>
      <tr>
        <td>Продано лотків (по 20 шт)</td>
        <td class="right"><span id="repTrays">0</span></td>
      </tr>
      <tr>
        <td>Виручка, грн</td>
        <td class="right"><span id="repIncome">0.00</span></td>
      </tr>
      <tr>
        <td>Витрати на корм, грн</td>
        <td class="right"><span id="repFeedCost">0.00</span></td>
      </tr>
      <tr>
        <td>Чистий результат (прибуток), грн</td>
        <td class="right"><span id="repProfit">0.00</span></td>
      </tr>
      <tr>
        <td>Середня продуктивність, %</td>
        <td class="right"><span id="repProdAvg">0.0</span></td>
      </tr>
      <tr>
        <td>Собівартість 1 яйця (корм), грн</td>
        <td class="right"><span id="repCostPerEgg">0.000</span></td>
      </tr>
      <tr>
        <td>Прибуток з 1 яйця, грн</td>
        <td class="right"><span id="repProfitPerEgg">0.000</span></td>
      </tr>
      <tr>
        <td>Прибуток з 1 самки за період, грн</td>
        <td class="right"><span id="repProfitPerHen">0.00</span></td>
      </tr>
      <tr>
        <td>Інші витрати за період, грн</td>
        <td class="right"><span id="repOtherCost">0.00</span></td>
      </tr>
      <tr>
        <td>Повна собівартість 1 яйця (корм + інші), грн</td>
        <td class="right"><span id="repFullCostPerEgg">0.000</span></td>
      </tr>
      <tr>
        <td>Прибуток з 1 яйця з урахуванням всіх витрат, грн</td>
        <td class="right"><span id="repProfitPerEggFull">0.000</span></td>
      </tr>
    </table>
  </div>

  <!-- 9.3. Прогноз на 30 днів -->
  <h2 class="m3-title">9.3. Прогноз на 30 днів</h2>
  <p class="small">
    Розрахунок на основі поточної середньої несучості, кількості самок, ціни лотка та добової вартості корму.
  </p>

  <div class="table-wrapper">
    <table class="m3-table">
      <tr>
        <td>Очікуваних яєць за 30 днів</td>
        <td class="right"><span id="fcastEggs">0</span></td>
      </tr>
      <tr>
        <td>Очікуваних лотків (по 20 шт)</td>
        <td class="right"><span id="fcastTrays">0</span></td>
      </tr>
      <tr>
        <td>Очікувана виручка, грн</td>
        <td class="right"><span id="fcastIncome">0.00</span></td>
      </tr>
      <tr>
        <td>Очікувані витрати на корм, грн</td>
        <td class="right"><span id="fcastFeedCost">0.00</span></td>
      </tr>
      <tr>
        <td>Орієнтовний прибуток за 30 днів, грн</td>
        <td class="right"><span id="fcastProfit">0.00</span></td>
      </tr>
    </table>
  </div>

</div>
    <!-- SECTION 4 — LOG -->
<div class="m3-card">

    <h2>4. Щоденник витрат</h2>

    <div class="m3-input">
        <label>Дата</label>
        <input type="date" id="logDate">
    </div>

    <div class="m3-input">
        <label>Категорія</label>
        <input type="text" id="logCategory">
    </div>

    <div class="m3-input">
        <label>Сума (грн)</label>
        <input type="number" id="logAmount">
    </div>

    <div class="m3-input">
        <label>Коментар</label>
        <input type="text" id="logComment">
    </div>

    <button class="m3-btn" onclick="addLog()">Додати запис</button>

    <table class="m3-table">
        <thead>
            <tr>
                <th>Дата</th>
                <th>Категорія</th>
                <th>Сума</th>
                <th>Коментар</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="logBody"></tbody>
    </table>

</div>


</div>


<div id="incub" class="section-page" style="display:none;">
  <!-- Секція 6 (інкубація) -->
    <div class="m3-card" id="sec-incubation">

    <!-- 6.0 ІНКУБАЦІЯ -->
    <h2 class="m3-title">6. Інкубація</h2>

    <p class="small">
        Облік інкубаційних партій: дати закладки, кількість яєць,
        результати овоскопії, вилуплення та втрати.
    </p>


    <!-- 6.1 ДОДАТИ НОВУ ПАРТІЮ -->
    <h3 class="m3-subtitle">6.1. Нова інкубаційна партія</h3>

    <div class="m3-field-group">

        <p>
            Назва / номер партії:
            <input type="text" id="incBatchName" placeholder="Партія №3" class="m3-input">
        </p>

        <p>
            Дата закладки:
            <input type="date" id="incStartDate" class="m3-input">
        </p>

        <p>
            Кількість закладених яєць:
            <input type="number" id="incEggsSet" value="0" step="1" class="m3-input" style="width:120px;">
        </p>

        <p>
            Нотатка (інкубатор, режим, порода тощо):
            <textarea id="incNote" rows="2" class="m3-input" style="width:100%;"></textarea>
        </p>

        <button class="btn m3-btn" id="addIncubation">Додати партію</button>
    </div>


    <!-- 6.2 ФІЛЬТР -->
    <h3 class="m3-subtitle">6.2. Фільтр партій</h3>

    <p>
      Показувати:
      <select id="incFilter" class="m3-input" style="width:220px;" onchange="renderInc()">
          <option value="all">Всі партії</option>
          <option value="active">Активні</option>
          <option value="done">Завершені</option>
          <option value="candling">На овоскопії</option>
          <option value="hatch">Етап виведення</option>
      </select>
    </p>


    <!-- 6.3 СПИСОК ПАРТІЙ -->
    <h3 class="m3-subtitle">6.3. Список інкубаційних партій</h3>

    <div class="table-wrapper">
        <table class="m3-table">
            <thead>
                <tr>
                    <th>Партія</th>
                    <th>Дата</th>
                    <th>Днів</th>
                    <th>Закладено</th>
                    <th>Незапліднені</th>
                    <th>Вилупилось</th>
                    <th>Померли (інк.)</th>
                    <th>Померли (брудер)</th>
                    <th>Живі</th>
                    <th>Нагадування</th>
                    <th>Нотатка</th>
                    <th>Дії</th>
                </tr>
            </thead>

            <tbody id="incubationBody">
                <!-- renderInc() вставляє дані -->
            </tbody>
        </table>
    </div>

</div>
</div>

<!-- SECTION 7 — GRAPHS -->
<div class="m3-card">

    <h2>7. Графіки продуктивності</h2>

    <div class="m3-chart">
        <canvas id="chartEggs"></canvas>
    </div>

    <div class="m3-chart">
        <canvas id="chartIncome"></canvas>
    </div>

</div>

<!-- SECTION 8 — FLOCK -->
<div class="m3-card">

    <h2>8. Поголів’я</h2>

    <div class="m3-input">
        <label>Кількість самців</label>
        <input type="number" id="males" value="10" onchange="recalcFlock()">
    </div>

    <div class="m3-input">
        <label>Кількість самок</label>
        <input type="number" id="females" value="40" onchange="recalcFlock()">
    </div>

    <div class="m3-input">
        <label>Смертність</label>
        <input type="number" id="deaths" value="0" onchange="recalcFlock()">
    </div>

    <div class="m3-input">
        <label>Середній вік (днів)</label>
        <input type="number" id="avgAge" value="60" onchange="recalcFlock()">
    </div>

    <p><b>Усього поголів'я:</b> <span id="flockTotal">50</span></p>

</div>



<!-- SECTION 10 — PWA -->
<div class="m3-card">

    <h2>10. Оффлайн режим (PWA)</h2>

    <p>Щоб додати застосунок на головний екран:</p>

    <ul>
        <li><b>Android:</b> Меню → «Install App» або «Add to Home Screen».</li>
        <li><b>iOS:</b> кнопка Share → «Add to Home Screen».</li>
    </ul>

</div>

<!-- ======================================= -->
<!--  SECTION 11   GOOGLE DRIVE — FULL PRO   -->
<!-- ======================================= -->
<div class="m3-card">
    <h2>11. Google Drive — FULL PRO BACKUP MODE</h2>

    <p class="small">
      Дані ніколи не пропадуть.<br>
      Відновлюються автоматично.<br>
      Працює офлайн.<br>
      Синхронізується у Drive при кожній зміні.
    </p>

    <button class="m3-btn" id="btnDriveLogin">Увійти в Google</button>
    <button class="m3-btn" id="btnBackup">Створити резервну копію</button>
    <button class="m3-btn" id="btnRestore">Відновити дані</button>

    <p id="driveStatus">Статус: очікується…</p>
</div>

<script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
<script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>


<!-- MAIN APP LOGIC -->
<script src="app.js"></script>

</body>
</html>

</body>
</html>
