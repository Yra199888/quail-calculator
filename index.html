<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<title>Quail Farm Tools PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>

/* === –¢–ï–ú–ò === */
:root {
    --bg: #111;
    --text: #fff;
    --card: #1c1c1c;
    --border: #333;
    --accent: #4caf50;
}
.light {
    --bg: #f2f2f2;
    --text: #111;
    --card: #ffffff;
    --border: #ccc;
    --accent: #2a7cda;
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: Arial, sans-serif;
    transition: background 0.25s, color 0.25s;
}

/* === –í–ï–†–•–ù–Ñ –ú–ï–ù–Æ (—ñ–∫–æ–Ω–∫–∏, –∞–∫—Ç–∏–≤–Ω–∞ +20%) === */
.topnav {
    display: flex;
    justify-content: space-around;
    padding: 12px 0;
    background: var(--card);
    border-bottom: 2px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 50;
}

.tab-btn {
    font-size: 26px;
    opacity: 0.6;
    transition: 0.2s;
}

.tab-btn.active {
    transform: scale(1.20);
    opacity: 1;
    color: var(--accent);
}

/* === –ü–ï–†–ï–ú–ò–ö–ê–ß –î–ï–ù–¨/–ù–Ü–ß === */
#themeToggle {
    position: absolute;
    right: 15px;
    top: 10px;
    font-size: 26px;
    cursor: pointer;
}

/* === –°–¢–û–†–Ü–ù–ö–ò === */
.page {
    display: none;
    padding: 20px;
}
.page.active-page {
    display: block;
}

/* === –ö–ê–†–¢–ö–ò === */
.container {
    background: var(--card);
    padding: 18px;
    border-radius: 12px;
    border: 1px solid var(--border);
    margin-bottom: 28px;
}

/* === –¢–ê–ë–õ–ò–¶–Ü === */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

td, th {
    border: 1px solid var(--border);
    padding: 8px;
    text-align: left;
    font-size: 16px;
}

th {
    background: var(--accent);
    color: #fff;
    text-align: center;
}

/* === –Ü–ù–ü–£–¢–ò === */
input, textarea, select {
    width: 100%;
    padding: 10px;
    background: #0005;
    border: 1px solid var(--border);
    border-radius: 6px;
    margin: 6px 0 14px;
    color: var(--text);
    font-size: 16px;
}

/* === –ö–ù–û–ü–ö–ò === */
button {
    width: 100%;
    background: var(--accent);
    border: none;
    color: #fff;
    padding: 12px;
    font-size: 17px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 5px;
}
button:hover {
    opacity: 0.9;
}

/* === –°–ü–û–í–Ü–©–ï–ù–ù–Ø "–ó–ë–ï–†–ï–ñ–ï–ù–û" === */
#saveAlert {
    position: fixed;
    top: 15px;
    right: 15px;
    padding: 12px 20px;
    background: var(--accent);
    color: #fff;
    border-radius: 6px;
    opacity: 0;
    transition: 0.3s;
    z-index: 9999;
}
#saveAlert.show {
    opacity: 1;
}

/* === –°–¢–ê–¢–£–°–ò –ó–ê–ú–û–í–õ–ï–ù–¨ === */
.status-active {
    color: #4caf50;
    font-weight: bold;
}
.status-completed {
    color: #2a7cda;
    font-weight: bold;
}
.status-cancelled {
    color: #e74c3c;
    font-weight: bold;
}

.order-item {
    background: #0004;
    border: 1px solid var(--border);
    padding: 14px;
    border-radius: 10px;
    margin-bottom: 14px;
}

/* === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†: 100% –®–ò–†–ò–ù–ê, –ù–Ü–ß–û–ì–û –ù–ï –ù–ê–ö–õ–ê–î–ê–Ñ–¢–¨–°–Ø === */
.calc-row {
    display: grid;
    grid-template-columns: 1fr 90px 90px 90px;
    gap: 10px;
    margin-bottom: 12px;
}

.calc-row input {
    width: 100%;
}

/* –î–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤ */
@media (max-width: 480px) {
    .calc-row {
        grid-template-columns: 1fr 60px 60px 70px;
    }
}

/* === –Ø–ô–¶–Ø ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å—ñ–≤ === */
.egg-record {
    background: #0004;
    padding: 12px;
    margin-bottom: 12px;
    border-radius: 8px;
    border: 1px solid var(--border);
}

</style>
</head>

<body>

<!-- === –ö–ù–û–ü–ö–ê –¢–ï–ú–ò === -->
<div class="theme-btn" onclick="toggleTheme()" id="themeIcon">üåô</div>

<!-- === –ù–ê–í–Ü–ì–ê–¶–Ü–Ø –ó–í–ï–†–•–£ === -->
<div class="topnav">
  <div class="tab-icon active" onclick="openTab('calculator', this)">üßÆ</div>
  <div class="tab-icon" onclick="openTab('eggs', this)">ü•ö</div>
  <div class="tab-icon" onclick="openTab('orders', this)">üì¶</div>
  <div class="tab-icon" onclick="openTab('finance', this)">üí∞</div>
</div>

<!-- === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† === -->
<div id="page-calculator" class="page active-page">
  <h2>üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–æ—Ä–º—É</h2>
  <div class="container">
    <table>
      <tr>
        <th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th>
        <th>–ö-—Å—Ç—å</th>
        <th>–¶—ñ–Ω–∞</th>
        <th>–°—É–º–∞</th>
      </tr>
    </table>
    <table id="feedTable"></table>

    <h3>–û–± º—î–º –∫–æ—Ä–º—É (–∫–≥):</h3>
    <input id="feedVolume" type="number" value="25">

    <p>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <b id="feedTotal">0</b> –≥—Ä–Ω</p>
    <p>–¶—ñ–Ω–∞ –∑–∞ –∫–≥: <b id="feedPerKg">0</b> –≥—Ä–Ω</p>
    <p>–°—É–º–∞ –∑–∞ –æ–± º—î–º: <b id="feedVolumeTotal">0</b> –≥—Ä–Ω</p>
  </div>
</div>

<!-- === –Ø–ô–¶–Ø === -->
<div id="page-eggs" class="page">
  <h2>ü•ö –û–±–ª—ñ–∫ —è—î—Ü—å</h2>

  <div class="container">
    <label>–î–∞—Ç–∞:</label>
    <input type="date" id="eggsDate">

    <label>–Ø—î—Ü—å –∑–∞ –¥–æ–±—É:</label>
    <input id="eggsGood" type="number">

    <label>–ë—Ä–∞–∫–æ–≤–∞–Ω—ñ:</label>
    <input id="eggsBad" type="number">

    <label>–î–ª—è –¥–æ–º—É:</label>
    <input id="eggsHome" type="number">

    <button onclick="saveEggRecord()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
  </div>

  <h3>–©–æ–¥–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç</h3>
  <div id="eggsList"></div>
</div>

<!-- === –ó–ê–ú–û–í–õ–ï–ù–ù–Ø === -->
<div id="page-orders" class="page">
  <h2>üì¶ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>

  <div class="container">
    <label>–î–∞—Ç–∞:</label>
    <input id="orderDate" type="date">

    <label>–Ü–º'—è –∫–ª—ñ—î–Ω—Ç–∞:</label>
    <input id="orderName">

    <label>–õ–æ—Ç–∫—ñ–≤:</label>
    <input id="orderTrays" type="number">

    <label>–î–µ—Ç–∞–ª—ñ:</label>
    <textarea id="orderDetails"></textarea>

    <button onclick="addOrder()">–î–æ–¥–∞—Ç–∏</button>
  </div>

  <h3>–°–ø–∏—Å–æ–∫ –∑–∞–º–æ–≤–ª–µ–Ω—å</h3>
  <div id="ordersList"></div>
</div>

<!-- === –§–Ü–ù–ê–ù–°–ò === -->
<div id="page-finance" class="page">
  <h2>üí∞ –§—ñ–Ω–∞–Ω—Å–∏</h2>

  <div class="container">
    <label>–¶—ñ–Ω–∞ –∑–∞ –ª–æ—Ç–æ–∫:</label>
    <input id="trayPrice" type="number" value="50">

    <button onclick="saveFinanceSettings()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>

    <h3>–ó–≤—ñ—Ç</h3>
    <div id="financeReport"></div>

    <button onclick="exportCSV()">–ï–∫—Å–ø–æ—Ä—Ç CSV</button>
  </div>
</div>

<script>
/* === –¢–ï–ú–ê === */
function toggleTheme() {
  document.body.classList.toggle("light");
  const i = document.getElementById("themeIcon");
  i.innerText = document.body.classList.contains("light") ? "‚òÄÔ∏è" : "üåô";
}
toggleTheme();

/* === –í–ö–õ–ê–î–ö–ò === */
function openTab(page, el) {
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active-page"));
  document.querySelector("#page-" + page).classList.add("active-page");

  document.querySelectorAll(".tab-icon").forEach(i=>i.classList.remove("active"));
  el.classList.add("active");
}

/* === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† === */
const feedComponents = [
  ["–ö—É–∫—É—Ä—É–¥–∑–∞",10],
  ["–ü—à–µ–Ω–∏—Ü—è",5],
  ["–Ø—á–º—ñ–Ω—å",1.5],
  ["–°–æ—î–≤–∞ –º–∞–∫—É—Ö–∞",3],
  ["–°–æ–Ω—è—à–Ω–∏–∫–æ–≤–∞ –º–∞–∫—É—Ö–∞",2.5],
  ["–†–∏–±–Ω–µ –±–æ—Ä–æ—à–Ω–æ",1],
  ["–ö–æ—Ä–º–æ–≤—ñ –¥—Ä—ñ–∂–¥–∂—ñ",0.7],
  ["–¢—Ä–∏–∫–∞–ª—å—Ü—ñ–π—Ñ–æ—Å—Ñ–∞—Ç",0.5],
  ["Dolfos D",0.7],
  ["–°—ñ–ª—å",0.05]
];

function loadFeed() {
  let html="";
  feedComponents.forEach((c,i)=>{
    let p = localStorage.getItem("p"+i) || 0;
    html += `
    <tr>
      <td>${c[0]}</td>
      <td><input id="qty${i}" value="${c[1]}"></td>
      <td><input id="price${i}" value="${p}"></td>
      <td id="sum${i}">0</td>
    </tr>`;
  });
  document.getElementById("feedTable").innerHTML = html;
  calcFeed();
}
loadFeed();

function calcFeed(){
  let total=0,kg=0;
  feedComponents.forEach((c,i)=>{
    let q = +document.getElementById("qty"+i).value;
    let p = +document.getElementById("price"+i).value;
    localStorage.setItem("p"+i,p);
    let s=q*p;
    total+=s; kg+=q;
    document.getElementById("sum"+i).innerText=s.toFixed(2);
  });
  let per=kg?total/kg:0;
  let vol=+document.getElementById("feedVolume").value;
  document.getElementById("feedTotal").innerText=total.toFixed(2);
  document.getElementById("feedPerKg").innerText=per.toFixed(2);
  document.getElementById("feedVolumeTotal").innerText=(per*vol).toFixed(2);
}
document.addEventListener("input", calcFeed);

/* === –Ø–ô–¶–Ø === */
let eggs={};

function saveEggRecord(){
  let d=document.getElementById("eggsDate").value || new Date().toISOString().slice(0,10);
  eggs[d]={
    good:+eggsGood.value||0,
    bad:+eggsBad.value||0,
    home:+eggsHome.value||0
  };
  localStorage.setItem("eggs",JSON.stringify(eggs));
  showEggs();
}
if(localStorage.getItem("eggs")) eggs=JSON.parse(localStorage.getItem("eggs"));

function showEggs(){
  let box="";
  Object.keys(eggs).sort().reverse().forEach(d=>{
    let e=eggs[d];
    let com=e.good-e.bad-e.home;
    let trays=Math.floor(com/20);
    box+=`
    <div class="order-block">
      <b>${d}</b><br>
      –í—Å—å–æ–≥–æ: ${e.good}<br>
      –ë—Ä–∞–∫: ${e.bad}<br>
      –î—ñ–º: ${e.home}<br>
      –ö–æ–º–µ—Ä—Ü—ñ–π–Ω—ñ: ${com}<br>
      –õ–æ—Ç–∫–∏: ${trays}<br>
      <button onclick="deleteEgg('${d}')">–í–∏–¥–∞–ª–∏—Ç–∏</button>
    </div>`;
  });
  document.getElementById("eggsList").innerHTML=box;
}
showEggs();

function deleteEgg(d){
  delete eggs[d];
  localStorage.setItem("eggs",JSON.stringify(eggs));
  showEggs();
}

/* === –ó–ê–ú–û–í–õ–ï–ù–ù–Ø === */
let orders={};

if(localStorage.getItem("orders")) orders=JSON.parse(localStorage.getItem("orders"));

function addOrder(){
  let d=orderDate.value || new Date().toISOString().slice(0,10);
  if(!orders[d]) orders[d]=[];
  orders[d].push({
    name:orderName.value,
    trays:+orderTrays.value,
    details:orderDetails.value,
    status:"active"
  });
  localStorage.setItem("orders",JSON.stringify(orders));
  showOrders();
}

function showOrders(){
  let out="";
  Object.keys(orders).sort().reverse().forEach(d=>{
    out+=`<h3>${d}</h3>`;
    orders[d].forEach((o,i)=>{
      out+=`
      <div class="order-block">
        <b>${o.name}</b> ‚Äî ${o.trays} –ª–æ—Ç.<br>
        –î–µ—Ç–∞–ª—ñ: ${o.details}<br>
        –°—Ç–∞—Ç—É—Å: <span class="status-${o.status}">${o.status}</span><br>
        <button onclick="setStatus('${d}',${i},'completed')">–í–∏–∫–æ–Ω–∞–Ω–æ</button>
        <button onclick="setStatus('${d}',${i},'cancelled')">–°–∫–∞—Å–æ–≤–∞–Ω–æ</button>
        <button onclick="deleteOrder('${d}',${i})">–í–∏–¥–∞–ª–∏—Ç–∏</button>
      </div>`;
    });
  });
  document.getElementById("ordersList").innerHTML=out;
}
showOrders();

function setStatus(d,i,s){
  orders[d][i].status=s;
  localStorage.setItem("orders",JSON.stringify(orders));
  showOrders();
}
function deleteOrder(d,i){
  orders[d].splice(i,1);
  if(orders[d].length===0) delete orders[d];
  localStorage.setItem("orders",JSON.stringify(orders));
  showOrders();
}

/* === –§–Ü–ù–ê–ù–°–ò === */
function saveFinanceSettings(){
  localStorage.setItem("trayPrice",trayPrice.value);
  showFinance();
}
function showFinance(){
  let price=+(localStorage.getItem("trayPrice")||50);
  trayPrice.value=price;
  let income=0;
  Object.keys(orders).forEach(d=>{
    orders[d].forEach(o=>{
      if(o.status==="completed") income += o.trays*price;
    });
  });
  document.getElementById("financeReport").innerHTML=
    `<b>–î–æ—Ö—ñ–¥:</b> ${income} –≥—Ä–Ω`;
}
showFinance();

/* === CSV === */
function exportCSV(){
  let rows=["–î–∞—Ç–∞,–Ü–º º—è,–õ–æ—Ç–∫–∏,–î–µ—Ç–∞–ª—ñ,–°—Ç–∞—Ç—É—Å"];
  Object.keys(orders).forEach(d=>{
    orders[d].forEach(o=>{
      rows.push(`${d},${o.name},${o.trays},${o.details},${o.status}`);
    });
  });

  let csv=rows.join("\n");
  let blob=new Blob([csv],{type:"text/csv"});
  let a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="finance.csv";
  a.click();
}

</script>

</body>
</html>