<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Feed Calculator PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    :root {
        --bg: #111;
        --text: #fff;
        --card: #1b1b1b;
        --border: #333;
        --accent: #4caf50;
    }

    .light {
        --bg: #f3f3f3;
        --text: #111;
        --card: #fff;
        --border: #ccc;
        --accent: #2a7cda;
    }

    body {
        font-family: Arial;
        background: var(--bg);
        color: var(--text);
        margin:0;
        padding:20px;
        transition: .3s;
    }

    h2 {
        text-align:center;
        margin-bottom:20px;
    }

    .container {
        max-width:900px;
        margin:auto;
        background:var(--card);
        padding:20px;
        border-radius:10px;
        border:1px solid var(--border);
    }

    table {
        width:100%;
        border-collapse:collapse;
        margin-bottom:20px;
        font-size:16px;
    }

    th {
        background: var(--accent);
        color:#fff;
    }

    td, th {
        border:1px solid var(--border);
        padding:8px;
        text-align:center;
    }

    input {
        width:90px;
        padding:5px;
        border-radius:5px;
        border:1px solid var(--border);
        background:#0003;
        color:var(--text);
    }

    .result {
        font-size: 20px;
        margin-top: 15px;
        line-height: 30px;
    }

    .theme-btn {
        background: var(--accent);
        border:none;
        padding:10px 20px;
        font-size:16px;
        color:#fff;
        border-radius:5px;
        cursor:pointer;
        float:right;
        margin-bottom:15px;
    }

    .theme-btn:hover {
        opacity:.85;
    }

    @media(max-width:600px){
        table, td, th {
            font-size:14px;
        }
        input {
            width:70px;
        }
    }
</style>
</head>
<body>

<button class="theme-btn" onclick="toggleTheme()">üåì –¢–µ–º–∞</button>

<h2>Feed Calculator PRO</h2>

<div class="container">

<table>
    <tr>
        <th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th>
        <th>–ö-—Å—Ç—å (–∫–≥)</th>
        <th>–¶—ñ–Ω–∞ –∑–∞ 1 –∫–≥</th>
        <th>–í–∞—Ä—Ç—ñ—Å—Ç—å</th>
    </tr>

</table>

<table id="tbl"></table>

<h3>–ü–æ—Ç—Ä—ñ–±–Ω–∏–π –æ–±'—î–º –∫–æ—Ä–º—É (–∫–≥):</h3>
<input type="number" id="volume" value="25" step="1">

<div class="result">
    üîπ –ó–∞–≥–∞–ª—å–Ω–∞ —Ü—ñ–Ω–∞: <span id="total">0</span> –≥—Ä–Ω<br>
    üîπ –¶—ñ–Ω–∞ –∑–∞ 1 –∫–≥: <span id="perkg">0</span> –≥—Ä–Ω<br>
    üîπ –í–∞—Ä—Ç—ñ—Å—Ç—å –æ–± º—î–º—É: <span id="totalVolume">0</span> –≥—Ä–Ω
</div>

</div>

<script>
const components = [
    ["–ö—É–∫—É—Ä—É–¥–∑–∞",10],
    ["–ü—à–µ–Ω–∏—Ü—è",5],
    ["–Ø—á–º—ñ–Ω—å",1.5],
    ["–°–æ—î–≤–∞ –º–∞–∫—É—Ö–∞",3],
    ["–°–æ–Ω—è—à–Ω–∏–∫–æ–≤–∞ –º–∞–∫—É—Ö–∞",2.5],
    ["–†–∏–±–Ω–µ –±–æ—Ä–æ—à–Ω–æ",1],
    ["–ö–æ—Ä–º–æ–≤—ñ –¥—Ä—ñ–∂–¥–∂—ñ",0.7],
    ["–¢—Ä–∏–∫–∞–ª—å—Ü—ñ–π—Ñ–æ—Å—Ñ–∞—Ç",0.5],
    ["Dolfos D",0.7],
    ["–°—ñ–ª—å",0.05]
];

function loadTable(){
    let html = "";
    components.forEach((c,i)=>{
        const qty = c[1];
        const price = localStorage.getItem("p"+(i+1)) || 0;
        html += `
        <tr>
            <td>${c[0]}</td>
            <td><input id="q${i+1}" type="number" value="${qty}" step="0.1"></td>
            <td><input id="p${i+1}" type="number" value="${price}" step="0.1"></td>
            <td id="s${i+1}">0</td>
        </tr>`;
    });
    document.getElementById("tbl").innerHTML = html;
}
loadTable();

function calc(){
    let total = 0;
    let totalKg = 0;

    for (let i = 1; i <= components.length; i++) {
        let q = parseFloat(document.getElementById("q"+i).value) || 0;
        let p = parseFloat(document.getElementById("p"+i).value) || 0;

        localStorage.setItem("p"+i, p); // –∞–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

        let sum = q * p;
        document.getElementById("s"+i).innerText = sum.toFixed(2);

        total += sum;
        totalKg += q;
    }

    let perkg = totalKg ? total / totalKg : 0;
    let vol = parseFloat(document.getElementById("volume").value) || 0;
    let totalVol = perkg * vol;

    document.getElementById("total").innerText = total.toFixed(2);
    document.getElementById("perkg").innerText = perkg.toFixed(2);
    document.getElementById("totalVolume").innerText = totalVol.toFixed(2);
}

document.addEventListener("input", calc);
calc();

// ---- –¢–ï–ú–ê ----
function toggleTheme(){
    document.body.classList.toggle("light");
    localStorage.setItem("theme", document.body.classList.contains("light") ? "light" : "dark");
}

if(localStorage.getItem("theme")==="light"){
    document.body.classList.add("light");
}
</script>

</body>
</html>