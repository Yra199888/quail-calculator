<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quail Calculator ‚Äî PRO MODE</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.webmanifest">

    <!-- BASIC STYLE A -->
    <style>
        body {
            font-family: system-ui, sans-serif;
            background:#f3f3f3;
            margin:0;
            padding:0;
        }
        .tabs {
            display:flex;
            background:#e8e8e8;
            border-bottom:1px solid #ccc;
        }
        .tab {
            flex:1;
            padding:12px;
            text-align:center;
            cursor:pointer;
        }
        .tab.active {
            background:white;
            font-weight:bold;
            border-bottom:3px solid #2d6a1f;
        }
        .page {
            display:none;
            padding:15px;
        }
        .card {
            background:white;
            padding:15px;
            margin-bottom:15px;
            border-radius:10px;
            box-shadow:0 1px 4px rgba(0,0,0,0.1);
        }
        table {
            width:100%;
            border-collapse:collapse;
            margin-top:10px;
        }
        table th, table td {
            padding:8px;
            border-bottom:1px solid #ddd;
        }
        button {
            padding:8px 14px;
            background:#2d6a1f;
            color:white;
            border:none;
            border-radius:6px;
            cursor:pointer;
            margin:4px 0;
        }
        button:hover { opacity:0.8; }
    </style>
</head>

<body>

<!-- TOP BAR -->
<div class="card" style="margin:0;border-radius:0;">
    <h2>üî• PRO MODE</h2>
    <div id="statusBar">–°—Ç–∞—Ç—É—Å: offline</div>

    <button id="saveLocal">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ</button>
    <button id="backupDrive">‚òÅ –†–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è Drive</button>
    <button id="restoreDrive">üîÑ –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∑ Drive</button>
</div>

<!-- NAVIGATION -->
<div class="tabs">
    <div class="tab active" onclick="showPage('feed')">–ö–æ—Ä–º</div>
    <div class="tab" onclick="showPage('eggs')">–Ø–π—Ü—è</div>
    <div class="tab" onclick="showPage('orders')">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
    <div class="tab" onclick="showPage('clients')">–ö–ª—ñ—î–Ω—Ç–∏</div>
    <div class="tab" onclick="showPage('finance')">–§—ñ–Ω–∞–Ω—Å–∏</div>
    <div class="tab" onclick="showPage('incub')">–Ü–Ω–∫—É–±–∞—Ü—ñ—è</div>
</div>

<!-- =============================== -->
<!--             FEED                -->
<!-- =============================== -->
<div id="feed" class="page" style="display:block;">

    <div class="card">
        <h3>1. –ö–æ–º–±—ñ–∫–æ—Ä–º</h3>
        <label>–í–∞–≥–∞ –ø–∞—Ä—Ç—ñ—ó (–∫–≥):</label>
        <input id="targetKg" type="number" value="25" onchange="recalcFeed()">

        <button onclick="applyRecipePreset('starter')">–°—Ç–∞—Ä—Ç–µ—Ä</button>
        <button onclick="applyRecipePreset('grower')">–ì—Ä–æ–≤–µ—Ä</button>
        <button onclick="applyRecipePreset('layer')">–ù–µ—Å—É—á–∫–∏</button>

        <table>
            <thead><tr><th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th><th>–ö–≥</th><th>–¶—ñ–Ω–∞</th><th>–°—É–º–∞</th></tr></thead>
            <tbody id="feedRows"></tbody>
        </table>

        <p>–í–∞–≥–∞: <b id="feedTotalKg">0</b> –∫–≥</p>
        <p>–í–∞—Ä—Ç—ñ—Å—Ç—å: <b id="feedTotalCost">0</b> –≥—Ä–Ω</p>
    </div>

    <div class="card">
        <h3>–î–æ–±–æ–≤–∞ –Ω–æ—Ä–º–∞</h3>
        <input id="dailyNormInput" type="number" value="30">
        <input id="birdCountInput" type="number" value="0">

        <p>–ü–æ—Ç—Ä—ñ–±–Ω–æ: <span id="dailyNeedKg">0</span> –∫–≥</p>
        <p>–í–∞—Ä—Ç—ñ—Å—Ç—å: <span id="dailyCost">0</span></p>
    </div>

    <div class="card">
        <h3>–ó–∞–ø–∞—Å–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤</h3>
        <table id="componentStockTable">
            <thead><tr><th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th><th>–Ñ</th><th>–ü–æ—Ç—Ä—ñ–±–Ω–æ</th><th>–î–æ–∫—É–ø–∏—Ç–∏</th></tr></thead>
            <tbody id="stockRows"></tbody>
        </table>
    </div>

    <div class="card">
        <h3>–ì–æ—Ç–æ–≤–∏–π –∫–æ–º–±—ñ–∫–æ—Ä–º</h3>
        <p>–ì–æ—Ç–æ–≤–æ: <span id="feedStockRemain">0</span> –∫–≥</p>

        <input id="batchSizeInput" type="number" value="25">

        <button id="makeFeedBtn">–í–∏–≥–æ—Ç–æ–≤–∏—Ç–∏</button>
        <button id="consumeDailyBtn">–°–ø–∏—Å–∞—Ç–∏ –Ω–æ—Ä–º—É</button>

        <p>–ó–∞–ª–∏—à–æ–∫: <span id="feedLeft">0</span> –∫–≥</p>
        <p>–•–≤–∞—Ç–∏—Ç—å –Ω–∞: <span id="daysLeft">0</span> –¥–Ω—ñ–≤</p>
    </div>

    <div class="card">
        <h3>–ú–µ–Ω—ñ —Ç—Ä–µ–±–∞ –∫—É–ø–∏—Ç–∏</h3>
        <ul id="buySummary"></ul>
    </div>
</div>

<!-- =============================== -->
<!--             EGGS                -->
<!-- =============================== -->
<div id="eggs" class="page">

    <div class="card">
        <h3>2. –Ø–π—Ü—è</h3>

        <input id="eggsTotal" type="number" oninput="recalcEggsBalance(); recalcProductivity();" placeholder="–ó—ñ–±—Ä–∞–Ω–æ">
        <input id="eggsBad" type="number" oninput="recalcEggsBalance();" placeholder="–ë—Ä–∞–∫">
        <input id="eggsOwn" type="number" oninput="recalcEggsBalance();" placeholder="–î–ª—è —Å–µ–±–µ">
        <input id="eggsCarry" type="number" oninput="recalcEggsBalance();" placeholder="–£—á–æ—Ä–∞">

        <table>
            <tr><td>–°—å–æ–≥–æ–¥–Ω—ñ –¥–ª—è –ø—Ä–æ–¥–∞–∂—É</td><td id="eggsForSale">0</td></tr>
            <tr><td>–ó–∞–≥–∞–ª–æ–º –¥–æ—Å—Ç—É–ø–Ω–æ</td><td id="eggsForSaleTotal">0</td></tr>
            <tr><td>–õ–æ—Ç–∫—ñ–≤</td><td id="traysCount">0</td></tr>
            <tr><td>–ó–∞–ª–∏—à–æ–∫ —è—î—Ü—å</td><td id="eggsRemainder">0</td></tr>
            <tr><td>–¶—ñ–Ω–∞</td><td><input id="trayPrice" type="number" oninput="recalcEggsBalance();"></td></tr>
            <tr><td>–°—É–º–∞</td><td id="income">0</td></tr>
        </table>

        <h3>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</h3>
        <input id="hens1" type="number" oninput="recalcProductivity();" placeholder="–°–∞–º–æ–∫ 1 –ø–∞—Ä—Ç—ñ—è">
        <input id="hens2" type="number" oninput="recalcProductivity();" placeholder="–°–∞–º–æ–∫ 2 –ø–∞—Ä—Ç—ñ—è">

        <table>
            <tr><td>–†–∞–∑–æ–º</td><td id="hensTotal">0</td></tr>
            <tr><td>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</td><td id="productivityToday">0</td></tr>
        </table>
    </div>

    <div class="card">
        <h3>2.3 –õ–æ—Ç–∫–∏</h3>
        <table>
            <tr><td>–£—Å—å–æ–≥–æ</td><td id="totalTraysTodayLabel">0</td></tr>
            <tr><td>–ó–∞–±—Ä–æ–Ω—å–æ–≤–∞–Ω–æ</td><td id="reservedTrays">0</td></tr>
            <tr><td>–í—ñ–ª—å–Ω—ñ</td><td id="freeTrays">0</td></tr>
        </table>
    </div>
</div>

<!-- =============================== -->
<!--           ORDERS                -->
<!-- =============================== -->
<div id="orders" class="page">
    <div class="card">
        <h3>5. –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</h3>

        <input id="ordName" placeholder="–ö–ª—ñ—î–Ω—Ç">
        <input id="ordEggs" type="number" placeholder="–Ø—î—Ü—å">
        <input id="ordTrays" type="number" placeholder="–õ–æ—Ç–∫—ñ–≤">
        <input id="ordDate" type="date">
        <input id="ordNote" placeholder="–ü—Ä–∏–º—ñ—Ç–∫–∞">

        <button onclick="addOrder()">–î–æ–¥–∞—Ç–∏</button>

        <h4>–ê–∫—Ç–∏–≤–Ω—ñ</h4>
        <table><tbody id="ordersActive"></tbody></table>

        <h4>–í–∏–∫–æ–Ω–∞–Ω—ñ</h4>
        <table><tbody id="ordersDone"></tbody></table>
    </div>
</div>

<!-- =============================== -->
<!--           CLIENTS               -->
<!-- =============================== -->
<div id="clients" class="page">
    <div class="card">
        <h3>–ö–ª—ñ—î–Ω—Ç–∏</h3>
        <table>
            <thead>
                <tr>
                    <th>–ö–ª—ñ—î–Ω—Ç</th>
                    <th>–ó–∞–º–æ–≤–ª–µ–Ω—å</th>
                    <th>–õ–æ—Ç–∫—ñ–≤</th>
                    <th>–Ø—î—Ü—å</th>
                    <th>–°—É–º–∞</th>
                    <th>–û—Å—Ç–∞–Ω–Ω—î</th>
                </tr>
            </thead>
            <tbody id="clientsBody"></tbody>
        </table>
    </div>
</div>

<!-- =============================== -->
<!--           FINANCE               -->
<!-- =============================== -->
<div id="finance" class="page">
    <div class="card">
        <h3>–§—ñ–Ω–∞–Ω—Å–∏</h3>
        <table>
            <tr><td>–ö–æ—Ä–º</td><td id="summaryFeedCost">0</td></tr>
            <tr><td>–í–∏—Ä—É—á–∫–∞</td><td id="summaryEggIncome">0</td></tr>
            <tr><td>–ü—Ä–∏–±—É—Ç–æ–∫</td><td id="summaryProfit">0</td></tr>
        </table>
    </div>
</div>

<!-- =============================== -->
<!--          INCUBATION             -->
<!-- =============================== -->
<div id="incub" class="page">
    <div class="card">
        <h3>–Ü–Ω–∫—É–±–∞—Ü—ñ—è</h3>

        <input id="incBatchName" placeholder="–ù–∞–∑–≤–∞">
        <input id="incStartDate" type="date">
        <input id="incEggsSet" type="number" placeholder="–ö—ñ–ª—å–∫—ñ—Å—Ç—å —è—î—Ü—å">
        <textarea id="incNote" placeholder="–ù–æ—Ç–∞—Ç–∫–∞"></textarea>

        <button id="addIncubation">–î–æ–¥–∞—Ç–∏</button>

        <h4>–ü–∞—Ä—Ç—ñ—ó</h4>
        <table>
            <thead>
                <tr>
                    <th>–ü–∞—Ä—Ç—ñ—è</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–î–Ω—ñ–≤</th>
                    <th>–ó–∞–∫–ª–∞–¥–µ–Ω–æ</th>
                    <th>–ù–µ–∑–∞–ø–ª—ñ–¥–Ω–µ–Ω—ñ</th>
                    <th>–í–∏–ª—É–ø–∏–ª–æ—Å—å</th>
                    <th>–Ü–Ω–∫.</th>
                    <th>–ë—Ä—É–¥–µ—Ä</th>
                    <th>–ñ–∏–≤—ñ</th>
                    <th>–ù–æ—Ç–∞—Ç–∫–∞</th>
                </tr>
            </thead>
            <tbody id="incubationBody"></tbody>
        </table>
    </div>
</div>

<!-- =============================== -->
<!--   JS IMPORTS (–í–ê–ñ–õ–ò–í–û)         -->
<!-- =============================== -->

<script src="core/data.js"></script>
<script src="core/storage.js"></script>
<script src="core/sync.js"></script>
<script src="core/drive.js"></script>
<script src="core/pwa.js"></script>

<script src="modules/feed.js"></script>
<script src="modules/eggs.js"></script>
<script src="modules/orders.js"></script>
<script src="modules/clients.js"></script>
<script src="modules/finance.js"></script>
<script src="modules/incub.js"></script>
<script src="modules/flock.js"></script>
<script src="modules/logs.js"></script>
<script src="modules/render.js"></script>
<script src="modules/graphs.js"></script>

<script src="app.js"></script>

<script>
function showPage(id) {
    document.querySelectorAll(".page").forEach(p => p.style.display="none");
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));

    document.getElementById(id).style.display="block";
    event.target.classList.add("active");

    renderAll();
}
</script>

</body>
</html>